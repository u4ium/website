"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[54854],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(n),h=a,g=d["".concat(p,".").concat(h)]||d[h]||c[h]||i;return n?r.createElement(g,l(l({ref:t},u),{},{components:n})):r.createElement(g,l({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},75140:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return h},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var r=n(83117),a=n(80102),i=(n(67294),n(3905)),l=["components"],o={sidebar_position:5},p="Upgrading, Rollback and Delete",s={unversionedId:"manual/SCALE Apps/Upgrade-rollback-delete-an-App",id:"manual/SCALE Apps/Upgrade-rollback-delete-an-App",title:"Upgrading, Rollback and Delete",description:"With TrueCharts we always push new versions of an App for any change. Even for the containers.",source:"@site/docs/manual/SCALE Apps/Upgrade-rollback-delete-an-App.md",sourceDirName:"manual/SCALE Apps",slug:"/manual/SCALE Apps/Upgrade-rollback-delete-an-App",permalink:"/docs/manual/SCALE Apps/Upgrade-rollback-delete-an-App",draft:!1,editUrl:"https://github.com/truecharts/website/tree/master/docs/manual/SCALE Apps/Upgrade-rollback-delete-an-App.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"manualSidebar",previous:{title:"Editing Apps",permalink:"/docs/manual/SCALE Apps/Edit-an-App"},next:{title:"Adding additional storage",permalink:"/docs/manual/SCALE Apps/add-storage"}},u={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Upgrading",id:"upgrading",level:2},{value:"Upgrading the App  using the GUI",id:"upgrading-the-app--using-the-gui",level:3},{value:"Rollback",id:"rollback",level:2},{value:"Reverting using the GUI",id:"reverting-using-the-gui",level:3},{value:"Reverting using the CLI",id:"reverting-using-the-cli",level:3},{value:"Finding the last installed version",id:"finding-the-last-installed-version",level:3},{value:"Delete",id:"delete",level:2},{value:"Delete using the GUI",id:"delete-using-the-gui",level:3},{value:"Delete using the CLI",id:"delete-using-the-cli",level:3},{value:"Video Guide",id:"video-guide",level:4}],d={toc:c};function h(e){var t=e.components,o=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"upgrading-rollback-and-delete"},"Upgrading, Rollback and Delete"),(0,i.kt)("p",null,"With TrueCharts we always push new versions of an App for any change. Even for the containers.\nThis ensures upgrading the App always gives you the Latest-and-Greatest from TrueCharts"),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Make sure your storage-pool is created and working"),(0,i.kt)("li",{parentName:"ul"},'Make Make sure you selected your storage-pool when you first opened the "Apps" interface, if not please refer to quick-start guide ',(0,i.kt)("inlineCode",{parentName:"li"},"01 - First time Apps setup")),(0,i.kt)("li",{parentName:"ul"},"Make sure you have a working internet connection and can reach github and truecharts.org from the host system."),(0,i.kt)("li",{parentName:"ul"},"Make sure you already added the TrueCharts catalog from guide 02"),(0,i.kt)("li",{parentName:"ul"},"Make sure your App is installed and, preferably, working")),(0,i.kt)("h2",{id:"upgrading"},"Upgrading"),(0,i.kt)("h3",{id:"upgrading-the-app--using-the-gui"},"Upgrading the App  using the GUI"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"Installed Applications")),(0,i.kt)("li",{parentName:"ul"},"Make sure your App reports that an Upgrade is available on the App Card."),(0,i.kt)("li",{parentName:"ul"},"Make note of the current version, you might want to revert to this version in the future."),(0,i.kt)("li",{parentName:"ul"},"click the menu button on the right side of the App card"),(0,i.kt)("li",{parentName:"ul"},"Select ",(0,i.kt)("inlineCode",{parentName:"li"},"Upgrade")),(0,i.kt)("li",{parentName:"ul"},"Confirm your wish to upgrade")),(0,i.kt)("p",null,"The App will then go through a process of backing up(!) and upgrading. If the process fails, your changes will not be submitted and the edit will be reverted.\nAfter the process popup disappears, it might take a few minutes to actually deploy your newly upgraded App, due to some things that happen in the background."),(0,i.kt)("h2",{id:"rollback"},"Rollback"),(0,i.kt)("h3",{id:"reverting-using-the-gui"},"Reverting using the GUI"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Select the top 3 dots on your application card"),(0,i.kt)("li",{parentName:"ol"},'Select "Roll Back"'),(0,i.kt)("li",{parentName:"ol"},'Under "Version" - Click the dropdown and select which version you would like to rollback to'),(0,i.kt)("li",{parentName:"ol"},'Check the "Roll Back Snapshot" box'),(0,i.kt)("li",{parentName:"ol"},'Select "Roll Back"')),(0,i.kt)("h3",{id:"reverting-using-the-cli"},"Reverting using the CLI"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"enter cli to enter the SCALE command line interface"),(0,i.kt)("li",{parentName:"ol"},"enter app chart_release rollback\nIt should give you this screen:\n",(0,i.kt)("img",{alt:"cli-rollback1",src:n(22061).Z,width:"1737",height:"536"})),(0,i.kt)("li",{parentName:"ol"},"Enter the release name and item_version like this:\n",(0,i.kt)("img",{alt:"cli-rollback2",src:n(64442).Z,width:"1786",height:"692"}),"\n(be sure to remove the # before the release name)"),(0,i.kt)("li",{parentName:"ol"},"Click save then click quit\nIt should show something like this, confirming the rollback:\n",(0,i.kt)("img",{alt:"cli-rollback3",src:n(52503).Z,width:"1161",height:"651"}))),(0,i.kt)("h3",{id:"finding-the-last-installed-version"},"Finding the last installed version"),(0,i.kt)("p",null,"Sadly enough, SCALE does not lists which versions are available to roll-back to, but does required a version to be entered.\nThere is a short walk-through to get the versioning history for the App in question:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"run ",(0,i.kt)("inlineCode",{parentName:"li"},"export KUBECONFIG=/etc/rancher/k3s/k3s.yaml")),(0,i.kt)("li",{parentName:"ol"},"run  ",(0,i.kt)("inlineCode",{parentName:"li"},"helm history jackett -n ix-jackett"),' where "jackett" should be replaced with the name of the App that broke your UI.\nYou\'ll see this:\n',(0,i.kt)("img",{alt:"history",src:n(63672).Z,width:"1581",height:"322"}),'\nTake note of the "Chart" column, it lists the version numbers you can enter in the rollback interface, prefixed by the App Name.\nOf coarse only enter the version number in the GUI or CLI, not the name')),(0,i.kt)("h2",{id:"delete"},"Delete"),(0,i.kt)("h3",{id:"delete-using-the-gui"},"Delete using the GUI"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Select the top 3 dots on your application card"),(0,i.kt)("li",{parentName:"ol"},'Select "Delete"'),(0,i.kt)("li",{parentName:"ol"},'Check the "Confirm" box'),(0,i.kt)("li",{parentName:"ol"},'Select "Continue"')),(0,i.kt)("h3",{id:"delete-using-the-cli"},"Delete using the CLI"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Enter Truenas SCALE terminal via the GUI or SSH"),(0,i.kt)("li",{parentName:"ol"},"Type the following command",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cli -c 'app chart_release delete release_name=NAME_OF_APPLICATION'")),(0,i.kt)("li",{parentName:"ul"},"ex: ",(0,i.kt)("inlineCode",{parentName:"li"},"cli -c 'app chart_release delete release_name=traefik'"))))),(0,i.kt)("h4",{id:"video-guide"},"Video Guide"),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/ONbMhQJPQwc",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}h.isMDXComponent=!0},22061:function(e,t,n){t.Z=n.p+"assets/images/cli-rollback1-ab3302a37ee7cc8948dd082d0a8578de.png"},64442:function(e,t,n){t.Z=n.p+"assets/images/cli-rollback2-a454893e2d7bb6988cc2bc9714cd6604.png"},52503:function(e,t,n){t.Z=n.p+"assets/images/cli-rollback3-e7b6d6017fc17de8659ab1d77460fe29.png"},63672:function(e,t,n){t.Z=n.p+"assets/images/history-8a6834f5e0dd1c27ce5f7aa447b64bba.png"}}]);